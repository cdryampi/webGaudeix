{% extends 'core/base.html' %}
{% load i18n %}
{% block meta_description %}
  {% if categoria.metadescripcion %}
    <meta name="Description" content="{{ categoria.metadescripcion | safe | striptags }}">
    <meta property="og:description" content="{{ categoria.metadescripcion | safe | striptags }}">
  {% else %}
    {% if categoria.descripcion %}
      <meta name="Description" content="{{ categoria.descripcion | safe | striptags | truncatewords_html:150 }}">
      <meta property="og:description" content="{{ categoria.descripcion | striptags | truncatewords_html:150 | safe }}">
    {% endif %}
  {% endif %}
{% endblock meta_description%}

{% block meta_keywords %}
  {% if categoria.tags.all %}
    <meta name="Keywords" content="{% for tag in categoria.tags.all %}{{ tag }}{% if not forloop.last %}, {% endif %}{% endfor %}">
  {% endif %}
{% endblock meta_keywords %}

{% block canonical %}
  <link rel="canonical" href="{{ canonical_url }}"/>
{% endblock canonical %}

{% block title %}
    {% autoescape off %}
        {{ categoria.titulo |striptags | safe  }}
    {% endautoescape %}
{% endblock title %}


{% block extra_css %}
<style>
    .spinner-container {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: rgba(255, 255, 255, 0.8);
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 9999;
    }
    
    .spinner {
        border: 4px solid rgba(0, 0, 0, 0.3);
        border-top: 4px solid {% if header %} {{header.color_fondo_header}} {% else %} #3498db {% endif %}  ;
        border-radius: 50%;
        width: 40px;
        height: 40px;
        animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
  


  @media only screen and (max-width: 767px) {
    div#calendar-agenda-gaudeix{
      display:none;
    }
    #tipo-evento {
      text-align: center;
    }
  }
</style>

{% endblock extra_css %}

{% block media %}
  {% if carrusel %}
    <div class="hero-agenda-especial">
      {% comment %} Verifica si es un dispositivo m칩vil y el rango de im치genes {% endcomment %}
      {% if not request.user_agent.is_pc and carrusel.imatges.all.count >= 5 and carrusel.imatges.all.count <= 10 %}
        {% comment %} Asumiendo que deseas el carrusel est치ndar para dispositivos m칩viles {% endcomment %}
        {% include 'carrusel/carrusel.html' %}
      {% else %}
        {% if carrusel.tipo == 'collage' %}
          {% include 'carrusel/collage.html' %}
        {% else %}
          {% include 'carrusel/carrusel.html' %}
        {% endif %}
      {% endif %}
    </div>
  {% else %}
    {% if parallax %}
      <div class="hero-agenda-especial">
        {% include 'parallax/parallax.html' %}
      </div>
    {% endif %}
  {% endif %}
{% endblock media %}



{% block content %}
<section class="p-lg-5 p-md-5 overflow-hidden">
  <div class="col-12">
    <h1 class="h1 text-center py-5">{% blocktrans %}Viu la Cultura i les Festes a Cabrera de Mar{% endblocktrans %}</h1>
  </div>
  {% include 'blog/categorias/agenda_utils/filtro_agenda.html' %}
</section>

{% endblock %}

{% block asides %}
<aside class="container-fuild agenda-pdf-link py-2 my-2">
  <div class="col-md-12 col-lg-12 agenda-special-categories p-5">
      <div class="text-center  m-0 p-2 bg-light agenda-pdf-link">
          <a href="{% url 'agenda:calendario_pdf' %}" class="btn btn-outline-dark btn-lg">
              <i class="fas fa-file-download"></i>
              {% blocktrans %}Descarrega tota l'agenda en PDF{% endblocktrans %}
          </a>
      </div>
  </div>
</aside>

  {% if categorias %}
    <aside class="container-fuild py-0 my-0">
      <div class="container">
        <div class="col-12">
          <h2 class="text-center h2">{% blocktrans %}Descobreix els Tresors de Cabrera de Mar{% endblocktrans %}</h2>
        </div>
      </div>
    </aside>
    {% include 'blog/selecciones/categorias_seleccion.html' %}
  {% endif %}
{% endblock asides %}